# Phase 1 - ê°œë°œ ê°€ì´ë“œ
## ê³µí†µ ì»´í¬ë„ŒíŠ¸ & ê¸°ìˆ  ìŠ¤íƒ

> **ëª©ì **: Phase 1 ê°œë°œ ì‹œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•  ì»´í¬ë„ŒíŠ¸, DB ìŠ¤í‚¤ë§ˆ, API ì„¤ê³„ ê°€ì´ë“œ

---

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
2. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
3. [ê³µí†µ ì»´í¬ë„ŒíŠ¸](#ê³µí†µ-ì»´í¬ë„ŒíŠ¸)
4. [DB ìŠ¤í‚¤ë§ˆ ì „ì²´](#db-ìŠ¤í‚¤ë§ˆ-ì „ì²´)
5. [API ì„¤ê³„ ì›ì¹™](#api-ì„¤ê³„-ì›ì¹™)
6. [í™˜ê²½ ì„¤ì •](#í™˜ê²½-ì„¤ì •)
7. [ë°°í¬ ê°€ì´ë“œ](#ë°°í¬-ê°€ì´ë“œ)

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
```json
{
  "framework": "Next.js 16",
  "language": "TypeScript",
  "styling": "Tailwind CSS",
  "ui": "shadcn/ui",
  "state": "Zustand",
  "forms": "React Hook Form + Zod",
  "charts": "Chart.js",
  "i18n": "next-intl"
}
```

### Backend
```json
{
  "database": "Supabase (PostgreSQL)",
  "auth": "Supabase Auth",
  "storage": "Supabase Storage",
  "realtime": "Supabase Realtime",
  "functions": "Supabase Edge Functions"
}
```

### External APIs
```json
{
  "ai": "OpenAI GPT-4",
  "maps": "Kakao Maps API",
  "taxi": "Kakao Mobility API",
  "publicData": "ê³µê³µë°ì´í„° í¬í„¸",
  "push": "Firebase Cloud Messaging",
  "sms": "Aligo SMS API"
}
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
senior-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ [locale]/
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ health/
â”‚   â”‚   â”‚   â”œâ”€â”€ medication/
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ ai-chat/
â”‚   â”‚   â”œâ”€â”€ food/
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”œâ”€â”€ transport/
â”‚   â”‚   â””â”€â”€ family/
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ medications/
â”‚       â”œâ”€â”€ health/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/           # shadcn/ui
â”‚   â”œâ”€â”€ senior/       # ì‹œë‹ˆì–´ ì „ìš©
â”‚   â””â”€â”€ common/       # ê³µí†µ
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”œâ”€â”€ openai.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ hooks/
â”œâ”€â”€ stores/
â””â”€â”€ types/
```

---

## ê³µí†µ ì»´í¬ë„ŒíŠ¸

### ì‹œë‹ˆì–´ ì „ìš© ë²„íŠ¼

```typescript
// components/senior/Button.tsx
import { cn } from '@/lib/utils';

interface SeniorButtonProps {
  children: React.ReactNode;
  onClick?: () => void;
  variant?: 'primary' | 'secondary' | 'danger';
  size?: 'medium' | 'large';
  disabled?: boolean;
}

export const SeniorButton = ({
  children,
  onClick,
  variant = 'primary',
  size = 'large',
  disabled
}: SeniorButtonProps) => {
  return (
    <button
      onClick={onClick}
      disabled={disabled}
      className={cn(
        // ê¸°ë³¸ ìŠ¤íƒ€ì¼
        'rounded-xl font-bold shadow-lg transition-all',
        'active:scale-95 disabled:opacity-50',

        // í¬ê¸°
        size === 'large' && 'min-h-[60px] text-2xl px-8',
        size === 'medium' && 'min-h-[48px] text-xl px-6',

        // ìƒ‰ìƒ
        variant === 'primary' && 'bg-blue-600 text-white hover:bg-blue-700',
        variant === 'secondary' && 'bg-gray-200 text-gray-900 hover:bg-gray-300',
        variant === 'danger' && 'bg-red-600 text-white hover:bg-red-700'
      )}
    >
      {children}
    </button>
  );
};
```

### ì‹œë‹ˆì–´ ì „ìš© ì…ë ¥ í•„ë“œ

```typescript
// components/senior/Input.tsx
export const SeniorInput = ({
  label,
  value,
  onChange,
  placeholder,
  type = 'text'
}: SeniorInputProps) => {
  return (
    <div className="space-y-2">
      <label className="text-xl font-semibold text-gray-900">
        {label}
      </label>
      <input
        type={type}
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        className={cn(
          'w-full min-h-[60px] px-6 text-2xl',
          'border-2 border-gray-300 rounded-xl',
          'focus:border-blue-600 focus:outline-none',
          'placeholder:text-gray-400'
        )}
      />
    </div>
  );
};
```

### ì¹´ë“œ ì»´í¬ë„ŒíŠ¸

```typescript
// components/common/Card.tsx
export const Card = ({
  children,
  className
}: CardProps) => {
  return (
    <div className={cn(
      'bg-white rounded-2xl shadow-md p-6',
      className
    )}>
      {children}
    </div>
  );
};
```

---

## DB ìŠ¤í‚¤ë§ˆ ì „ì²´

### users í…Œì´ë¸”

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email VARCHAR(255) UNIQUE NOT NULL,
  role VARCHAR(20) NOT NULL CHECK (role IN ('senior', 'family', 'partner')),
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20),
  birth_date DATE,
  blood_type VARCHAR(10),
  profile_photo_url TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### family_relations í…Œì´ë¸”

```sql
CREATE TABLE family_relations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  senior_id UUID NOT NULL REFERENCES users(id),
  family_id UUID NOT NULL REFERENCES users(id),
  relation VARCHAR(50) NOT NULL, -- 'son', 'daughter', 'spouse'
  is_primary BOOLEAN DEFAULT false,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

## API ì„¤ê³„ ì›ì¹™

### REST API ê·œì¹™

```
GET    /api/resources       # ëª©ë¡ ì¡°íšŒ
GET    /api/resources/:id   # ë‹¨ì¼ ì¡°íšŒ
POST   /api/resources       # ìƒì„±
PATCH  /api/resources/:id   # ìˆ˜ì •
DELETE /api/resources/:id   # ì‚­ì œ
```

### ì‘ë‹µ í˜•ì‹

```typescript
// ì„±ê³µ
{
  success: true,
  data: { ... },
  meta?: { total, page, ... }
}

// ì—ëŸ¬
{
  success: false,
  error: {
    code: 'MEDICATION_NOT_FOUND',
    message: 'ì•½ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
  }
}
```

---

## í™˜ê²½ ì„¤ì •

### .env.local

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx

# OpenAI
OPENAI_API_KEY=sk-xxx

# ê³µê³µë°ì´í„°
DATA_GO_KR_API_KEY=xxx

# Kakao
NEXT_PUBLIC_KAKAO_MAP_KEY=xxx
KAKAO_MOBILITY_API_KEY=xxx

# Firebase
NEXT_PUBLIC_FIREBASE_CONFIG={"apiKey":"xxx",...}

# SMS
ALIGO_API_KEY=xxx
ALIGO_USER_ID=xxx
```

---

## ë°°í¬ ê°€ì´ë“œ

### Vercel ë°°í¬

```bash
# 1. Vercel CLI ì„¤ì¹˜
npm i -g vercel

# 2. ë¡œê·¸ì¸
vercel login

# 3. ë°°í¬
vercel --prod

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
vercel env add OPENAI_API_KEY production
```

---

**ì‘ì„±ì¼**: 2025-01-24
**ë²„ì „**: 1.0
