# Phase 1 - 가족 모니터링 시스템
## 기능 상세 기획서

> **개발 우선순위**: ⭐⭐⭐ (최우선)
> **예상 소요 시간**: 3주
> **담당**: Frontend 2명 + Backend 1명

---

## 기능 구성

1. 통합 돌봄 대시보드
2. 실시간 알림 시스템
3. 케어 로그 & 가족 채팅
4. 대리 입력 기능

---

## 통합 돌봄 대시보드

### 화면: `/family/dashboard`

```
┌─────────────────────────────────────┐
│  어머니 통합 현황                    │
│  홍길순 (75세)                       │
│                                      │
│  ━━━ 오늘 일정 ━━━                 │
│                                      │
│  09:00 ✅ 완료                      │
│  아침약 복용                         │
│                                      │
│  12:00 ⏰ 예정                      │
│  점심 식사                           │
│                                      │
│  14:00 ⏰ 예정                      │
│  혈압약 복용                         │
│                                      │
│  ━━━ 이번 주 활동 ━━━              │
│                                      │
│  복약 준수율: 100% (7일 연속) ✅    │
│  식사 기록률: 95%                   │
│  건강 측정: 주 5회                  │
│                                      │
│  ━━━ 건강 상태 요약 ━━━            │
│                                      │
│  종합 상태: 🟢 안정적               │
│  최근 혈압: 125/80 (정상)           │
│  최근 체중: 68kg (유지)             │
│                                      │
│  ━━━ 최근 활동 ━━━                 │
│                                      │
│  2시간 전 ✅                        │
│  아침약 복용 완료                    │
│                                      │
│  어제 오후 2시 ✅                   │
│  혈압 측정 (120/80)                 │
│                                      │
│  [전체 기록 보기]                   │
└─────────────────────────────────────┘
```

---

## 실시간 알림 시스템

### 알림 종류

```typescript
interface FamilyAlert {
  // 복약
  medicationMissed: "어머니가 오후 약을 아직 드시지 않으셨어요";
  medicationTaken: "어머니가 저녁 약을 복용하셨어요";

  // 식사
  mealSkipped: "어머니가 점심 식사를 거르셨어요";
  mealCompleted: "어머니가 저녁 식사를 완료하셨어요";

  // 건강 이상
  vitalAbnormal: "어머니 혈압이 높습니다 (150/95)";

  // 응급
  sosTriggered: "🚨 어머니가 SOS 버튼을 눌렀어요!";
}
```

---

## 케어 로그 & 가족 채팅

```
┌─────────────────────────────────────┐
│  케어 일지                           │
│                                      │
│  2025-02-20 (목)                    │
│  작성자: 큰딸 (김미영)              │
│                                      │
│  "오늘 어머니가 무릎 통증을         │
│   호소하셨어요. 다음 주 월요일      │
│   정형외과 예약 잡았습니다."        │
│                                      │
│  [사진 첨부]                        │
│  [수정] [삭제]                      │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  가족 채팅방                         │
│  어머니 케어팀 (3명)                 │
│                                      │
│  큰딸: 오늘 복약은 잘 하셨나요?     │
│  작은딸: 네, 100% 드셨어요 ✅       │
│  큰딸: 다행이네요!                  │
│                                      │
│  [메시지 입력]                      │
└─────────────────────────────────────┘
```

---

## DB 스키마

```sql
CREATE TABLE care_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id),
  author_id UUID NOT NULL REFERENCES users(id),
  content TEXT NOT NULL,
  photos TEXT[],
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE family_chat_messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  room_id UUID NOT NULL,
  sender_id UUID NOT NULL REFERENCES users(id),
  message TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

**작성일**: 2025-01-24
**버전**: 1.0
