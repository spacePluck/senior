# Phase 1 - 병원 찾기 & 예약 관리
## 기능 상세 기획서

> **개발 우선순위**: ⭐ (보통)
> **예상 소요 시간**: 2주
> **담당**: Frontend 개발자 1명
> **기술**: 공공데이터 API (건보공단)

---

## 기능 개요

### Phase 1 범위
- ✅ 병원 검색 (공공데이터 API)
- ✅ 병원 정보 제공
- ✅ 전화 연결
- ✅ 예약 일정 수동 입력 (자체 캘린더)
- ✅ 알림 설정
- ⏸️ 실시간 병원 예약 (Phase 2)

---

## 공공데이터 API 연동

### 건강보험심사평가원 API

```typescript
// 병원 정보 조회
const searchHospitals = async (params: {
  query?: string;        // 병원명 또는 주소
  specialty?: string;    // 진료과목
  latitude?: number;     // 현재 위치 (위도)
  longitude?: number;    // 현재 위치 (경도)
  radius?: number;       // 검색 반경 (km)
}) => {
  const response = await fetch(
    `https://apis.data.go.kr/B551182/hospInfoServicev2/getHospBasisList?` +
    `serviceKey=${process.env.DATA_GO_KR_API_KEY}&` +
    `yadmNm=${params.query}&` +
    `dgsbjtCd=${params.specialty}&` +
    `xPos=${params.longitude}&` +
    `yPos=${params.latitude}&` +
    `radius=${params.radius || 5000}&` +
    `pageNo=1&numOfRows=20`
  );

  const data = await response.json();
  return data.response.body.items.item;
};
```

---

## 병원 검색

### 화면: `/health/hospital/search`

```
┌─────────────────────────────────────┐
│  병원 찾기                           │
│                                      │
│  검색 방법 선택:                     │
│  ◉ 증상으로 찾기                    │
│  ○ 병원 이름으로 찾기               │
│  ○ 내 주변 병원                     │
│                                      │
│  [증상 입력 또는 선택]              │
│  예: 무릎 통증, 두통                │
│                                      │
│  또는 진료과목:                      │
│  • 정형외과                         │
│  • 내과                             │
│  • 신경외과                         │
│  • 안과                             │
│                                      │
│  [검색하기]                         │
└─────────────────────────────────────┘
```

---

## 병원 리스트

```
┌─────────────────────────────────────┐
│  정형외과 검색 결과 (15곳)          │
│                                      │
│  1. 서울대학교병원                  │
│     ⭐⭐⭐⭐⭐ 4.8 (234개)        │
│     📍 서울시 종로구 (2.3km)       │
│     ⏰ 평일 09:00-18:00            │
│     💰 초진 약 15,000원            │
│     📞 02-2072-2114                │
│                                      │
│     [전화하기] [상세보기]           │
│                                      │
│  ──────────────────────────────────│
│                                      │
│  2. 강동성심병원                    │
│     ⭐⭐⭐⭐ 4.5 (189개)          │
│     ...                             │
│                                      │
│  [더 보기]                          │
└─────────────────────────────────────┘
```

---

## 병원 상세 정보

```
┌─────────────────────────────────────┐
│  서울대학교병원                     │
│  ⭐⭐⭐⭐⭐ 4.8 (234개 리뷰)      │
│                                      │
│  ━━━ 기본 정보 ━━━                 │
│                                      │
│  📍 주소                            │
│  서울시 종로구 대학로 101           │
│  (강동구에서 2.3km)                 │
│                                      │
│  📞 전화                            │
│  02-2072-2114                       │
│  [전화 걸기]                        │
│                                      │
│  ⏰ 진료 시간                       │
│  평일: 09:00 - 18:00                │
│  토요일: 09:00 - 13:00              │
│  공휴일: 휴무                       │
│                                      │
│  💰 예상 진료비                     │
│  초진: 약 15,000원                  │
│  재진: 약 10,000원                  │
│                                      │
│  🏥 진료과목                        │
│  내과, 외과, 정형외과,              │
│  신경외과, 안과, 이비인후과         │
│                                      │
│  ━━━ 사용자 리뷰 (234개) ━━━       │
│                                      │
│  ⭐⭐⭐⭐⭐ 김○○ (2일 전)         │
│  "의사 선생님이 정말 친절하게       │
│   설명해주셨어요"                   │
│                                      │
│  [예약 일정 등록] [길 찾기]         │
└─────────────────────────────────────┘
```

---

## 예약 일정 등록

```
┌─────────────────────────────────────┐
│  예약 일정 등록                      │
│                                      │
│  병원: 서울대학교병원               │
│  진료과: 정형외과                   │
│                                      │
│  예약 날짜 *                         │
│  [2025-02-25 선택]                  │
│                                      │
│  예약 시간 *                         │
│  [10:00 선택]                       │
│                                      │
│  증상 메모 (선택)                    │
│  [텍스트 입력]                      │
│  예: 무릎이 붓고 아파요             │
│                                      │
│  알림 설정                           │
│  ☑ 1일 전 (2025-02-24 오전 9시)    │
│  ☑ 1시간 전 (2025-02-25 오전 9시)  │
│                                      │
│  [저장하기]                         │
└─────────────────────────────────────┘
```

---

## DB 스키마

```sql
CREATE TABLE hospital_appointments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id),
  hospital_name VARCHAR(200) NOT NULL,
  hospital_phone VARCHAR(20),
  hospital_address TEXT,
  department VARCHAR(100),
  appointment_date DATE NOT NULL,
  appointment_time TIME NOT NULL,
  symptoms TEXT,
  status VARCHAR(20) DEFAULT 'scheduled',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

**작성일**: 2025-01-24
**버전**: 1.0
**다음 문서**: 04-SOS-긴급-호출.md
