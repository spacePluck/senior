# Phase 2 - ì²­ì†Œ/ìˆ˜ë¦¬ ì‹¤ì‹œê°„ ì˜ˆì•½
## ê¸°ëŠ¥ ìƒì„¸ ê¸°íšì„œ

> **ê°œë°œ ìš°ì„ ìˆœìœ„**: â­â­ (ì¤‘ìš”)
> **ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4ì£¼
> **ë‹´ë‹¹**: Frontend 2ëª… + Backend 1ëª…

---

## ê¸°ëŠ¥ ê°œìš”

### Phase 1 vs Phase 2
- **Phase 1**: ì—…ì²´ ì •ë³´ ì œê³µ + ì „í™” ì—°ê²°
- **Phase 2**: **ì•± ë‚´ ì‹¤ì‹œê°„ ì˜ˆì•½ + ìë™ ê²°ì œ + ì‘ì—…ì ì¶”ì **

### í•µì‹¬ ê°€ì¹˜
- ì „í™” ì—†ì´ **ì›í´ë¦­ ì˜ˆì•½**
- ì‹¤ì‹œê°„ ê°€ëŠ¥ ì‹œê°„ í™•ì¸
- ìë™ ê²°ì œ ë° ì˜ˆì•½ í™•ì •
- ì‘ì—… ì „/í›„ ì‚¬ì§„ ê³µìœ 

---

## ì˜ˆì•½ í”Œë¡œìš°

### 1. ì„œë¹„ìŠ¤ ë° ë‚ ì§œ ì„ íƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê¹”ë”ì´ í™ˆí´ë¦¬ë‹                    â”‚
â”‚  â­â­â­â­â­ 4.9                   â”‚
â”‚                                      â”‚
â”‚  ì„œë¹„ìŠ¤ ì„ íƒ *                       â”‚
â”‚  â—‰ ì¼ë°˜ ê°€ì • ì²­ì†Œ                  â”‚
â”‚  â—‹ ì´ì‚¬/ì…ì£¼ ì²­ì†Œ                  â”‚
â”‚  â—‹ ì—ì–´ì»¨ ì²­ì†Œ                     â”‚
â”‚                                      â”‚
â”‚  í‰ìˆ˜ ì„ íƒ *                         â”‚
â”‚  â—‰ 20í‰ ì´í•˜ (100,000ì›)           â”‚
â”‚  â—‹ 20-30í‰ (130,000ì›)             â”‚
â”‚  â—‹ 30í‰ ì´ìƒ (180,000ì›)           â”‚
â”‚                                      â”‚
â”‚  ì¶”ê°€ ì˜µì…˜ (ì„ íƒ):                   â”‚
â”‚  â˜‘ ëƒ‰ì¥ê³  ë‚´ë¶€ ì²­ì†Œ (+20,000ì›)    â”‚
â”‚  â˜ ë² ë€ë‹¤ ì§‘ì¤‘ ì²­ì†Œ (+30,000ì›)    â”‚
â”‚                                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                      â”‚
â”‚  ì˜ˆìƒ ê¸ˆì•¡: 120,000ì›               â”‚
â”‚                                      â”‚
â”‚  [ë‚ ì§œ ì„ íƒí•˜ê¸°]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ˆì•½ ë‚ ì§œ ì„ íƒ                      â”‚
â”‚                                      â”‚
â”‚  2025ë…„ 2ì›”                          â”‚
â”‚                                      â”‚
â”‚  ì›”  í™”  ìˆ˜  ëª©  ê¸ˆ  í†   ì¼         â”‚
â”‚  17  18  19  20  21  22  23         â”‚
â”‚  â—   â—   âœ•   â—‰   â—   âœ•   âœ•        â”‚
â”‚                                      â”‚
â”‚  â— ì˜ˆì•½ ê°€ëŠ¥  â—‰ ì„ íƒë¨  âœ• ë¶ˆê°€ëŠ¥   â”‚
â”‚                                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                      â”‚
â”‚  2025-02-20 (ëª©) ê°€ëŠ¥í•œ ì‹œê°„        â”‚
â”‚                                      â”‚
â”‚  ì˜¤ì „                                â”‚
â”‚  [09:00 âœ•] [10:00] [11:00]         â”‚
â”‚                                      â”‚
â”‚  ì˜¤í›„                                â”‚
â”‚  [â—‰ 14:00] [15:00 âœ•] [16:00]       â”‚
â”‚                                      â”‚
â”‚  ì„ íƒ: 2025-02-20 (ëª©) 14:00        â”‚
â”‚  ì‘ì—… ì‹œê°„: ì•½ 3ì‹œê°„                â”‚
â”‚                                      â”‚
â”‚  [ë‹¤ìŒ]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ì£¼ì†Œ ë° íŠ¹ì´ì‚¬í•­ ì…ë ¥
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì„œë¹„ìŠ¤ ì •ë³´ ì…ë ¥                    â”‚
â”‚                                      â”‚
â”‚  ì„œë¹„ìŠ¤ ì£¼ì†Œ *                       â”‚
â”‚  [ì„œìš¸ì‹œ ê°•ë™êµ¬ ì²œí˜¸ë™ 123-45]      â”‚
â”‚  [ìƒì„¸: 101ë™ 1001í˜¸]               â”‚
â”‚  [ë³€ê²½]                             â”‚
â”‚                                      â”‚
â”‚  ì—°ë½ì²˜ *                            â”‚
â”‚  [010-1234-5678]                    â”‚
â”‚                                      â”‚
â”‚  ì¶œì… ë°©ë²•                           â”‚
â”‚  â—‰ ì§ì ‘ ë¬¸ ì—´ì–´ë“œë¦¬ê¸°              â”‚
â”‚  â—‹ ê³µë™í˜„ê´€ ë¹„ë²ˆ: [________]       â”‚
â”‚  â—‹ ë„ì–´ë½ ë¹„ë²ˆ: [________]         â”‚
â”‚                                      â”‚
â”‚  íŠ¹ì´ì‚¬í•­ (ì„ íƒ)                     â”‚
â”‚  [ì£¼ë°©ì´ ë§ì´ ë”ëŸ¬ì›Œìš”.             â”‚
â”‚   íŠ¹íˆ ê°€ìŠ¤ë ˆì¸ì§€ ì£¼ë³€ ê¸°ë¦„ë•Œê°€     â”‚
â”‚   ì‹¬í•©ë‹ˆë‹¤]                          â”‚
â”‚                                      â”‚
â”‚  ì£¼ì˜ì‚¬í•­                            â”‚
â”‚  [ê³ ì–‘ì´ê°€ ìˆì–´ìš”. ë¬¸ ì—´ ë•Œ         â”‚
â”‚   ì¡°ì‹¬í•´ì£¼ì„¸ìš”]                      â”‚
â”‚                                      â”‚
â”‚  [ë‹¤ìŒ]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ê²°ì œ ë° ì˜ˆì•½ í™•ì •
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ˆì•½ ì •ë³´ í™•ì¸ ë° ê²°ì œ              â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì˜ˆì•½ ì •ë³´ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  ì—…ì²´: ê¹”ë”ì´ í™ˆí´ë¦¬ë‹              â”‚
â”‚  ì„œë¹„ìŠ¤: ì¼ë°˜ ê°€ì • ì²­ì†Œ (20í‰)      â”‚
â”‚  ë‚ ì§œ: 2025-02-20 (ëª©)              â”‚
â”‚  ì‹œê°„: ì˜¤í›„ 2ì‹œ (14:00)             â”‚
â”‚  ì‘ì—… ì‹œê°„: ì•½ 3ì‹œê°„                â”‚
â”‚                                      â”‚
â”‚  â”â”â” ê¸ˆì•¡ â”â”â”                      â”‚
â”‚                                      â”‚
â”‚  ê¸°ë³¸ ì²­ì†Œ (20í‰):    100,000ì›     â”‚
â”‚  ëƒ‰ì¥ê³  ë‚´ë¶€ ì²­ì†Œ:     20,000ì›     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  ì´ ê²°ì œ ê¸ˆì•¡:        120,000ì›     â”‚
â”‚                                      â”‚
â”‚  ğŸ’³ ê²°ì œ ìˆ˜ë‹¨                       â”‚
â”‚  [KBêµ­ë¯¼ì¹´ë“œ ****1234 â–¼]           â”‚
â”‚                                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                      â”‚
â”‚  â˜‘ ì·¨ì†Œ/í™˜ë¶ˆ ê·œì •ì— ë™ì˜í•©ë‹ˆë‹¤      â”‚
â”‚  â€¢ 1ì¼ ì „ê¹Œì§€: ì „ì•¡ í™˜ë¶ˆ            â”‚
â”‚  â€¢ ë‹¹ì¼ ì·¨ì†Œ: í™˜ë¶ˆ ë¶ˆê°€             â”‚
â”‚                                      â”‚
â”‚  [120,000ì› ê²°ì œí•˜ê³  ì˜ˆì•½í•˜ê¸°]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ì˜ˆì•½ ì™„ë£Œ ë° ì‘ì—…ì ë°°ì •
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!          â”‚
â”‚                                      â”‚
â”‚  ì˜ˆì•½ë²ˆí˜¸: HC2025022001             â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì˜ˆì•½ ì •ë³´ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  ğŸ“… 2025-02-20 (ëª©) ì˜¤í›„ 2ì‹œ        â”‚
â”‚  ğŸ  ê¹”ë”ì´ í™ˆí´ë¦¬ë‹                 â”‚
â”‚  ğŸ“ ì„œìš¸ì‹œ ê°•ë™êµ¬ ì²œí˜¸ë™...         â”‚
â”‚                                      â”‚
â”‚  â”â”â” ë°°ì •ëœ ì‘ì—…ì â”â”â”             â”‚
â”‚                                      â”‚
â”‚  [í”„ë¡œí•„ ì‚¬ì§„]                      â”‚
â”‚                                      â”‚
â”‚  ê¹€â—‹â—‹                              â”‚
â”‚  â­ 4.9 (156ê°œ ë¦¬ë·°)                â”‚
â”‚  ê²½ë ¥ 5ë…„                            â”‚
â”‚                                      â”‚
â”‚  "ì •ë§ ê¼¼ê¼¼í•˜ê²Œ ì²­ì†Œí•´ì£¼ì„¸ìš”!"      â”‚
â”‚  - ì´â—‹â—‹ (2024-01-20)               â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì¤€ë¹„ì‚¬í•­ â”â”â”                  â”‚
â”‚                                      â”‚
â”‚  âœ“ ì²­ì†Œ ë„êµ¬ëŠ” ì—…ì²´ì—ì„œ ì§€ì°¸        â”‚
â”‚  âœ“ ê·€ì¤‘í’ˆì€ ë¯¸ë¦¬ ë³´ê´€í•´ì£¼ì„¸ìš”       â”‚
â”‚  âœ“ ì‘ì—… ì‹œê°„: ì•½ 3ì‹œê°„ ì†Œìš”         â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì•Œë¦¼ ì„¤ì • â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  â˜‘ 1ì¼ ì „ ì•Œë¦¼                      â”‚
â”‚  â˜‘ 1ì‹œê°„ ì „ ì•Œë¦¼                    â”‚
â”‚  â˜‘ ì‘ì—…ì ì¶œë°œ ì‹œ ì•Œë¦¼              â”‚
â”‚                                      â”‚
â”‚  [ì‘ì—…ìì—ê²Œ ë¬¸ì˜í•˜ê¸°]              â”‚
â”‚  [ì˜ˆì•½ ìƒì„¸ ë³´ê¸°]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. ì‘ì—… ë‹¹ì¼ - ì‹¤ì‹œê°„ ì¶”ì 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜¤ëŠ˜ ì˜ˆì•½ëœ ì„œë¹„ìŠ¤                  â”‚
â”‚                                      â”‚
â”‚  ì²­ì†Œ ì„œë¹„ìŠ¤ - ì˜¤í›„ 2ì‹œ             â”‚
â”‚                                      â”‚
â”‚  â”â”â” í˜„ì¬ ìƒíƒœ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  ğŸ”µ ì‘ì—…ì ì¶œë°œ (13:30)             â”‚
â”‚                                      â”‚
â”‚  ê¹€â—‹â—‹ ë‹˜ì´ ì¶œë°œí–ˆìŠµë‹ˆë‹¤            â”‚
â”‚  ì˜ˆìƒ ë„ì°©: 13:50 (20ë¶„ ë‚¨ìŒ)       â”‚
â”‚                                      â”‚
â”‚  [ì§€ë„ í‘œì‹œ]                        â”‚
â”‚  ğŸ“ ì‹¤ì‹œê°„ ìœ„ì¹˜                     â”‚
â”‚                                      â”‚
â”‚  [ì‘ì—…ìì—ê²Œ ì „í™”í•˜ê¸°]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ ë„ì°©

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸšª ì‘ì—…ìê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤           â”‚
â”‚                                      â”‚
â”‚  ë„ì°© ì‹œê°„: 13:55                   â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì‘ì—… ì‹œì‘ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  ğŸ”µ ì‘ì—… ì‹œì‘ (14:00)               â”‚
â”‚  âšª ì‘ì—… ì¤‘                         â”‚
â”‚  âšª ì‘ì—… ì™„ë£Œ                       â”‚
â”‚                                      â”‚
â”‚  ì˜ˆìƒ ì¢…ë£Œ: 17:00                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â†“ ì‘ì—… ì™„ë£Œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì²­ì†Œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!          â”‚
â”‚                                      â”‚
â”‚  ì‘ì—… ì‹œê°„: 14:00 - 16:50 (2ì‹œê°„ 50ë¶„)â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì‘ì—… ë‚´ì—­ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  âœ“ ê±°ì‹¤/ë°© ì²­ì†Œ ë° ì •ë¦¬             â”‚
â”‚  âœ“ ì£¼ë°© ì²­ì†Œ (ì‹±í¬ëŒ€, ê°€ìŠ¤ë ˆì¸ì§€)   â”‚
â”‚  âœ“ í™”ì¥ì‹¤ ì²­ì†Œ                      â”‚
â”‚  âœ“ ëƒ‰ì¥ê³  ë‚´ë¶€ ì²­ì†Œ                 â”‚
â”‚  âœ“ ë°”ë‹¥ ê±¸ë ˆì§ˆ                      â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì‘ì—… ì „/í›„ ì‚¬ì§„ â”â”â”           â”‚
â”‚                                      â”‚
â”‚  [Before]  â†’  [After]               â”‚
â”‚  [ì£¼ë°© ì‚¬ì§„ 4ì¥ ë³´ê¸°]               â”‚
â”‚  [í™”ì¥ì‹¤ ì‚¬ì§„ 2ì¥ ë³´ê¸°]             â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì‘ì—…ì ì½”ë©˜íŠ¸ â”â”â”             â”‚
â”‚                                      â”‚
â”‚  "ì£¼ë°© í›„ë“œ í•„í„°ê°€ ë§ì´ ë§‰í˜€ìˆì–´ì„œ  â”‚
â”‚   ì¤‘ì ì ìœ¼ë¡œ ì²­ì†Œí–ˆìŠµë‹ˆë‹¤.          â”‚
â”‚   ë‹¤ìŒì—ëŠ” ë² ë€ë‹¤ ì²­ì†Œë„             â”‚
â”‚   ì¶”ì²œë“œë¦½ë‹ˆë‹¤."                     â”‚
â”‚                                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                      â”‚
â”‚  ì„œë¹„ìŠ¤ëŠ” ì–´ë– ì…¨ë‚˜ìš”?               â”‚
â”‚                                      â”‚
â”‚  â­â­â­â­â­                       â”‚
â”‚                                      â”‚
â”‚  [í›„ê¸° ì‘ì„±í•˜ê¸°]                    â”‚
â”‚  [ë‹¤ì‹œ ì˜ˆì•½í•˜ê¸°]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DB ìŠ¤í‚¤ë§ˆ

```sql
-- ì²­ì†Œ/ìˆ˜ë¦¬ ì—…ì²´ (Phase 1ì—ì„œ í™•ì¥)
ALTER TABLE home_service_providers ADD COLUMN online_booking_enabled BOOLEAN DEFAULT false;
ALTER TABLE home_service_providers ADD COLUMN real_time_tracking_enabled BOOLEAN DEFAULT false;

-- ì‘ì—…ì
CREATE TABLE service_workers (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  provider_id UUID NOT NULL REFERENCES home_service_providers(id),
  name VARCHAR(100) NOT NULL,
  photo_url TEXT,
  years_of_experience INTEGER,
  specializations TEXT[],
  rating DECIMAL(2, 1) DEFAULT 0,
  review_count INTEGER DEFAULT 0,
  phone VARCHAR(20),
  active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ ìŠ¬ë¡¯
CREATE TABLE service_time_slots (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  provider_id UUID NOT NULL REFERENCES home_service_providers(id),
  worker_id UUID REFERENCES service_workers(id),
  date DATE NOT NULL,
  start_time TIME NOT NULL,
  is_available BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  UNIQUE(worker_id, date, start_time)
);

-- ì²­ì†Œ/ìˆ˜ë¦¬ ì˜ˆì•½
CREATE TABLE home_service_bookings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  booking_number VARCHAR(50) UNIQUE NOT NULL,
  user_id UUID NOT NULL REFERENCES users(id),
  provider_id UUID NOT NULL REFERENCES home_service_providers(id),
  worker_id UUID REFERENCES service_workers(id),

  -- ì„œë¹„ìŠ¤ ì •ë³´
  service_type VARCHAR(100) NOT NULL,
  service_size VARCHAR(50), -- 'small', 'medium', 'large'
  additional_options TEXT[],

  -- ì˜ˆì•½ ì¼ì‹œ
  booking_date DATE NOT NULL,
  booking_time TIME NOT NULL,
  estimated_duration INTEGER, -- ë¶„
  time_slot_id UUID REFERENCES service_time_slots(id),

  -- ì„œë¹„ìŠ¤ ì¥ì†Œ
  service_address TEXT NOT NULL,
  service_address_detail TEXT,
  contact_phone VARCHAR(20) NOT NULL,
  access_method VARCHAR(50), -- 'meet_in_person', 'passcode'
  door_passcode VARCHAR(20),
  special_notes TEXT,

  -- ê¸ˆì•¡
  base_price INTEGER NOT NULL,
  additional_options_price INTEGER DEFAULT 0,
  total_amount INTEGER NOT NULL,

  -- ê²°ì œ
  payment_method VARCHAR(50),
  payment_id VARCHAR(100),
  paid_at TIMESTAMP WITH TIME ZONE,

  -- ìƒíƒœ
  status VARCHAR(20) DEFAULT 'confirmed',
  -- 'confirmed', 'worker_assigned', 'on_the_way', 'in_progress', 'completed', 'cancelled'

  -- ì‘ì—… ì¶”ì 
  worker_departed_at TIMESTAMP WITH TIME ZONE,
  worker_arrived_at TIMESTAMP WITH TIME ZONE,
  work_started_at TIMESTAMP WITH TIME ZONE,
  work_completed_at TIMESTAMP WITH TIME ZONE,

  -- ì‘ì—… ê¸°ë¡
  services_performed TEXT[],
  worker_notes TEXT,
  before_photos TEXT[],
  after_photos TEXT[],

  -- í‰ê°€
  rating INTEGER,
  review TEXT,
  review_created_at TIMESTAMP WITH TIME ZONE,

  -- ì·¨ì†Œ
  cancelled_at TIMESTAMP WITH TIME ZONE,
  cancellation_reason TEXT,
  refund_amount INTEGER,

  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

## API ì—”ë“œí¬ì¸íŠ¸

### ì˜ˆì•½ ìƒì„±
```typescript
// POST /api/home-service-bookings
export async function POST(req: Request) {
  const {
    userId,
    providerId,
    serviceInfo,
    schedule,
    addressInfo,
    paymentMethod
  } = await req.json();

  // 1. ê¸ˆì•¡ ê³„ì‚°
  const provider = await getProvider(providerId);
  const basePrice = provider[`price_${serviceInfo.size}`];
  const additionalPrice = calculateAdditionalOptionsPrice(serviceInfo.additionalOptions);
  const totalAmount = basePrice + additionalPrice;

  // 2. ì‘ì—…ì ë°°ì •
  const worker = await assignWorker({
    providerId,
    date: schedule.date,
    time: schedule.time
  });

  if (!worker) {
    return Response.json({
      success: false,
      error: { code: 'NO_WORKER_AVAILABLE', message: 'ê°€ëŠ¥í•œ ì‘ì—…ìê°€ ì—†ìŠµë‹ˆë‹¤' }
    }, { status: 400 });
  }

  // 3. ê²°ì œ ì²˜ë¦¬
  const payment = await processPayment({
    amount: totalAmount,
    method: paymentMethod,
    userId,
    description: `${provider.name} - ${serviceInfo.serviceType}`
  });

  if (!payment.success) {
    return Response.json({
      success: false,
      error: { code: 'PAYMENT_FAILED', message: 'ê²°ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤' }
    }, { status: 400 });
  }

  // 4. ì˜ˆì•½ ìƒì„±
  const bookingNumber = generateBookingNumber('HC');

  const { data: booking } = await supabase
    .from('home_service_bookings')
    .insert({
      booking_number: bookingNumber,
      user_id: userId,
      provider_id: providerId,
      worker_id: worker.id,
      service_type: serviceInfo.serviceType,
      service_size: serviceInfo.size,
      additional_options: serviceInfo.additionalOptions,
      booking_date: schedule.date,
      booking_time: schedule.time,
      estimated_duration: serviceInfo.estimatedDuration,
      service_address: addressInfo.address,
      service_address_detail: addressInfo.addressDetail,
      contact_phone: addressInfo.phone,
      access_method: addressInfo.accessMethod,
      door_passcode: addressInfo.doorPasscode,
      special_notes: addressInfo.specialNotes,
      base_price: basePrice,
      additional_options_price: additionalPrice,
      total_amount: totalAmount,
      payment_method: paymentMethod,
      payment_id: payment.id,
      paid_at: new Date(),
      status: 'worker_assigned'
    })
    .select()
    .single();

  // 5. ì‹œê°„ ìŠ¬ë¡¯ ì—…ë°ì´íŠ¸
  await supabase
    .from('service_time_slots')
    .update({ is_available: false })
    .eq('worker_id', worker.id)
    .eq('date', schedule.date)
    .eq('start_time', schedule.time);

  // 6. ì•Œë¦¼
  await sendNotification({
    userId,
    title: 'âœ… ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤',
    body: `${schedule.date} ${schedule.time} - ${provider.name}`,
    data: {
      type: 'service_booking_confirmed',
      bookingId: booking.id
    }
  });

  return Response.json({ success: true, data: booking });
}
```

### ì‘ì—… ì‹œì‘/ì™„ë£Œ
```typescript
// POST /api/home-service-bookings/:id/start
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const { beforePhotos } = await req.json();

  const { data: booking } = await supabase
    .from('home_service_bookings')
    .update({
      status: 'in_progress',
      work_started_at: new Date(),
      before_photos: beforePhotos
    })
    .eq('id', params.id)
    .select()
    .single();

  // ê³ ê°ì—ê²Œ ì•Œë¦¼
  await sendNotification({
    userId: booking.user_id,
    title: 'ğŸ”µ ì‘ì—…ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤',
    body: 'ì²­ì†Œê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤'
  });

  return Response.json({ success: true, data: booking });
}

// POST /api/home-service-bookings/:id/complete
export async function POST(
  req: Request,
  { params }: { params: { id: string } }
) {
  const {
    servicesPerformed,
    workerNotes,
    afterPhotos
  } = await req.json();

  const { data: booking } = await supabase
    .from('home_service_bookings')
    .update({
      status: 'completed',
      work_completed_at: new Date(),
      services_performed: servicesPerformed,
      worker_notes: workerNotes,
      after_photos: afterPhotos
    })
    .eq('id', params.id)
    .select()
    .single();

  // ê³ ê°ì—ê²Œ ì•Œë¦¼ ë° ì‚¬ì§„ ê³µìœ 
  await sendNotification({
    userId: booking.user_id,
    title: 'âœ… ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤',
    body: 'ì²­ì†Œ ì „/í›„ ì‚¬ì§„ì„ í™•ì¸í•´ë³´ì„¸ìš”',
    data: {
      type: 'service_completed',
      bookingId: booking.id
    }
  });

  // ê°€ì¡±ì—ê²Œë„ ê³µìœ 
  await sendFamilyNotifications(booking.user_id, {
    title: 'ì²­ì†Œ ì„œë¹„ìŠ¤ ì™„ë£Œ',
    body: 'ì§‘ ì²­ì†Œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤',
    bookingId: booking.id
  });

  return Response.json({ success: true, data: booking });
}
```

---

**ì‘ì„±ì¼**: 2025-01-24
**ë²„ì „**: 1.0
**ë‹¤ìŒ ë¬¸ì„œ**: 05-ì¹´ì¹´ì˜¤íƒì‹œ-ì§ì ‘-ì—°ë™.md
