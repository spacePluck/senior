# Phase 1 - AI ê±´ê°• ì–´ì‹œìŠ¤í„´íŠ¸
## ê¸°ëŠ¥ ìƒì„¸ ê¸°íšì„œ

> **ê°œë°œ ìš°ì„ ìˆœìœ„**: â­â­ (ì¤‘ìš”)
> **ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1ì£¼
> **ë‹´ë‹¹**: Frontend ê°œë°œì 1ëª…
> **ê¸°ìˆ **: OpenAI GPT-4 API

---

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ëŠ¥ ê°œìš”](#ê¸°ëŠ¥-ê°œìš”)
2. [GPT API ì—°ë™](#gpt-api-ì—°ë™)
3. [ì¦ìƒ ë¶„ì„ & ì§„ë£Œê³¼ ì¶”ì²œ](#ì¦ìƒ-ë¶„ì„--ì§„ë£Œê³¼-ì¶”ì²œ)
4. [ê±´ê°• ìƒë‹´ ì±—ë´‡](#ê±´ê°•-ìƒë‹´-ì±—ë´‡)
5. [ì£¼ê°„ ê±´ê°• ë¦¬í¬íŠ¸](#ì£¼ê°„-ê±´ê°•-ë¦¬í¬íŠ¸)
6. [ì˜ˆì¸¡ ì¼€ì–´](#ì˜ˆì¸¡-ì¼€ì–´)
7. [UI/UX](#uiux)
8. [API ì„¤ê³„](#api-ì„¤ê³„)

---

## ê¸°ëŠ¥ ê°œìš”

### ê°œë°œ ëª©ì 
- ì‹œë‹ˆì–´ê°€ **ê°„ë‹¨í•œ ê±´ê°• ì§ˆë¬¸**ì„ ì¦‰ì‹œ í•´ê²°
- ë³‘ì› ê°€ê¸° ì „ **ì§„ë£Œê³¼ ì¶”ì²œ**ìœ¼ë¡œ ì‹œê°„ ì ˆì•½
- **24ì‹œê°„ ê±´ê°• ìƒë‹´** ê°€ëŠ¥

### í•µì‹¬ ê°€ì¹˜
```
ì¦ìƒ ì…ë ¥ â†’ AI ë¶„ì„ â†’ ì§„ë£Œê³¼ ì¶”ì²œ + ì¡°ì¹˜ ë°©ë²•
â†’ ë¶ˆì•ˆê° í•´ì†Œ + ë³‘ì› ë°©ë¬¸ íš¨ìœ¨í™”
```

---

## GPT API ì—°ë™

### OpenAI API ì„¤ì •

```typescript
// lib/openai.ts
import OpenAI from 'openai';

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

export const askGPT = async (
  prompt: string,
  systemPrompt: string,
  options?: {
    temperature?: number;
    maxTokens?: number;
  }
) => {
  const response = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: [
      {
        role: 'system',
        content: systemPrompt
      },
      {
        role: 'user',
        content: prompt
      }
    ],
    temperature: options?.temperature ?? 0.7,
    max_tokens: options?.maxTokens ?? 500,
  });

  return response.choices[0].message.content;
};
```

---

## ì¦ìƒ ë¶„ì„ & ì§„ë£Œê³¼ ì¶”ì²œ

### í™”ë©´: `/health/ai-chat`

```typescript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI ê±´ê°• ì–´ì‹œìŠ¤í„´íŠ¸               â”‚
â”‚                                      â”‚
â”‚  ì¦ìƒì„ ë§ì”€í•´ì£¼ì„¸ìš”                 â”‚
â”‚                                      â”‚
â”‚  [í…ìŠ¤íŠ¸ ì…ë ¥ì¹¸]                    â”‚
â”‚  ì˜ˆ: ë¨¸ë¦¬ê°€ ì•„íŒŒìš”                  â”‚
â”‚                                      â”‚
â”‚  [ìŒì„± ì…ë ¥ ë²„íŠ¼] ğŸ¤                â”‚
â”‚                                      â”‚
â”‚  ë˜ëŠ” ìì£¼ ë¬»ëŠ” ì§ˆë¬¸:                â”‚
â”‚  â€¢ ì–´ì§€ëŸ¬ì›Œìš”                       â”‚
â”‚  â€¢ ê°€ìŠ´ì´ ë‹µë‹µí•´ìš”                  â”‚
â”‚  â€¢ ë¬´ë¦ì´ ì•„íŒŒìš”                    â”‚
â”‚  â€¢ ìˆ¨ì‰¬ê¸° í˜ë“¤ì–´ìš”                  â”‚
â”‚                                      â”‚
â”‚  [ë¶„ì„í•˜ê¸°]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI í”„ë¡¬í”„íŠ¸ ì„¤ê³„

```typescript
const analyzeSymptom = async (symptom: string, userContext?: UserContext) => {
  const systemPrompt = `
ë‹¹ì‹ ì€ ì‹œë‹ˆì–´ ì „ë¬¸ ê±´ê°• ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

ì—­í• :
1. ì¦ìƒì„ ë¶„ì„í•˜ì—¬ ê°€ëŠ¥í•œ ì›ì¸ì„ ì„¤ëª…í•©ë‹ˆë‹¤
2. ì ì ˆí•œ ì§„ë£Œê³¼ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤ (ìµœëŒ€ 3ê°œ)
3. ì¦‰ì‹œ í•  ìˆ˜ ìˆëŠ” ì¡°ì¹˜ ë°©ë²•ì„ ì•Œë ¤ì¤ë‹ˆë‹¤
4. ë³‘ì› ë°©ë¬¸ í•„ìš”ì„±ì„ íŒë‹¨í•©ë‹ˆë‹¤ (ê¸´ê¸‰/ì¼ë°˜/ë¶ˆí•„ìš”)

ì£¼ì˜ì‚¬í•­:
- ì˜í•™ì  ì§„ë‹¨ì€ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ (ì˜ì‚¬ê°€ ì•„ë‹˜)
- "~ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤", "~ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤" ë“± ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ í‘œí˜„
- ì‹œë‹ˆì–´ê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ë§ë¡œ ì„¤ëª…
- ê³µí¬ê°ì„ ì£¼ì§€ ì•Šë„ë¡ ì£¼ì˜

ì‘ë‹µ í˜•ì‹ (JSON):
{
  "possibleCauses": ["ì›ì¸1", "ì›ì¸2"],
  "departments": [
    {
      "name": "ì§„ë£Œê³¼ëª…",
      "reason": "ì¶”ì²œ ì´ìœ "
    }
  ],
  "immediateActions": ["ì¡°ì¹˜1", "ì¡°ì¹˜2"],
  "urgency": "emergency" | "normal" | "optional",
  "explanation": "ì‰¬ìš´ ë§ë¡œ ì„¤ëª…"
}
`;

  const userPrompt = `
í™˜ì ì •ë³´:
- ë‚˜ì´: ${userContext?.age ?? 'ì•Œ ìˆ˜ ì—†ìŒ'}
- ê¸°ì € ì§ˆí™˜: ${userContext?.conditions?.join(', ') ?? 'ì—†ìŒ'}
- ë³µìš© ì•½ë¬¼: ${userContext?.medications?.join(', ') ?? 'ì—†ìŒ'}

ì¦ìƒ: ${symptom}

ìœ„ ì¦ìƒì„ ë¶„ì„í•˜ì—¬ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”.
`;

  const response = await askGPT(userPrompt, systemPrompt, {
    temperature: 0.7,
    maxTokens: 800
  });

  return JSON.parse(response);
};
```

### AI ì‘ë‹µ í™”ë©´

```typescript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI ë¶„ì„ ê²°ê³¼                    â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì¦ìƒ: ë¨¸ë¦¬ê°€ ì•„íŒŒìš” â”â”â”       â”‚
â”‚                                      â”‚
â”‚  ê°€ëŠ¥í•œ ì›ì¸:                        â”‚
â”‚  â€¢ ê¸´ì¥ì„± ë‘í†µ                      â”‚
â”‚  â€¢ í¸ë‘í†µ                           â”‚
â”‚  â€¢ ê³ í˜ˆì••                           â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì¶”ì²œ ì§„ë£Œê³¼ â”â”â”               â”‚
â”‚                                      â”‚
â”‚  1. ì‹ ê²½ì™¸ê³¼ â­                     â”‚
â”‚     ë‘í†µì´ ì§€ì†ë˜ë©´ ì‹ ê²½ì™¸ê³¼ì—ì„œ    â”‚
â”‚     ì •ë°€ ê²€ì‚¬ë¥¼ ë°›ì•„ë³´ì„¸ìš”          â”‚
â”‚                                      â”‚
â”‚  2. ë‚´ê³¼                            â”‚
â”‚     í˜ˆì•• í™•ì¸ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤  â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì¦‰ì‹œ í•  ìˆ˜ ìˆëŠ” ì¡°ì¹˜ â”â”â”      â”‚
â”‚                                      â”‚
â”‚  1. ì¡°ìš©í•˜ê³  ì–´ë‘ìš´ ê³³ì—ì„œ íœ´ì‹     â”‚
â”‚  2. ì¶©ë¶„í•œ ë¬¼ ë§ˆì‹œê¸°                â”‚
â”‚  3. ëª©ê³¼ ì–´ê¹¨ ìŠ¤íŠ¸ë ˆì¹­              â”‚
â”‚                                      â”‚
â”‚  â”â”â” ë³‘ì› ë°©ë¬¸ í•„ìš”ì„± â”â”â”          â”‚
â”‚                                      â”‚
â”‚  ğŸŸ¡ ì¼ë°˜ (2-3ì¼ ë‚´ ë°©ë¬¸)            â”‚
â”‚                                      â”‚
â”‚  ë‘í†µì´ ê³„ì†ë˜ê±°ë‚˜ ì‹¬í•´ì§€ë©´         â”‚
â”‚  ë³‘ì›ì— ê°€ì„œ ê²€ì‚¬ë¥¼ ë°›ìœ¼ì„¸ìš”.       â”‚
â”‚                                      â”‚
â”‚  âš ï¸ ì´ëŸ° ì¦ìƒì´ ìˆìœ¼ë©´ ì¦‰ì‹œ ë³‘ì›:  â”‚
â”‚  - ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì‹¬í•œ ë‘í†µ             â”‚
â”‚  - ë§ì´ ì–´ëˆŒí•´ì§                    â”‚
â”‚  - ì‹œì•¼ê°€ íë ¤ì§                    â”‚
â”‚                                      â”‚
â”‚  [ë³‘ì› ì°¾ê¸°] [ë‹¤ì‹œ ì§ˆë¬¸í•˜ê¸°]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê¸´ê¸‰ ìƒí™© ê°ì§€

```typescript
const detectEmergency = (symptom: string): EmergencyLevel => {
  const emergencyKeywords = [
    'ê°€ìŠ´ í†µì¦', 'í˜¸í¡ê³¤ë€', 'ì˜ì‹', 'ì‹¤ì‹ ',
    'ì‹¬í•œ ë‘í†µ', 'ë§ì´ ì•ˆë‚˜ì˜´', 'í•œìª½ ë§ˆë¹„',
    'í”¼ë¥¼ í† í•¨', 'ì‹¬í•œ ì¶œí˜ˆ', 'ì‹¬ì¥ì´ ë‘ê·¼'
  ];

  const urgent = emergencyKeywords.some(keyword =>
    symptom.includes(keyword)
  );

  if (urgent) {
    return {
      level: 'emergency',
      action: '119 ì¦‰ì‹œ í˜¸ì¶œ',
      message: 'ğŸš¨ ì‘ê¸‰ ìƒí™©ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ 119ì— ì—°ë½í•˜ì„¸ìš”!'
    };
  }

  return { level: 'normal' };
};

// ì‘ê¸‰ ìƒí™©ì´ë©´ ìë™ìœ¼ë¡œ SOS í™”ë©´ìœ¼ë¡œ ì´ë™
if (emergency.level === 'emergency') {
  router.push('/emergency/call-119');
}
```

---

## ê±´ê°• ìƒë‹´ ì±—ë´‡

### ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤

```typescript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI ê±´ê°• ìƒë‹´                    â”‚
â”‚                                      â”‚
â”‚  [ëŒ€í™” ë‚´ì—­]                        â”‚
â”‚                                      â”‚
â”‚  ğŸ‘¤ ë‹¹ë‡¨ê°€ ìˆëŠ”ë° ë­˜ ë¨¹ìœ¼ë©´ ì•ˆë˜ë‚˜ìš”?â”‚
â”‚                                      â”‚
â”‚  ğŸ¤– ë‹¹ë‡¨ê°€ ìˆìœ¼ì‹œë©´ ë‹¤ìŒ ìŒì‹ì€     â”‚
â”‚     í”¼í•˜ì‹œëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤:           â”‚
â”‚                                      â”‚
â”‚     âŒ í”¼í•´ì•¼ í•  ìŒì‹:              â”‚
â”‚     â€¢ í° ìŒ€ë°¥, ë¹µ, ë©´ë¥˜             â”‚
â”‚     â€¢ ê³¼ì, ì¼€ì´í¬                  â”‚
â”‚     â€¢ ë‹¨ ìŒë£Œìˆ˜                     â”‚
â”‚                                      â”‚
â”‚     âœ… ê¶Œì¥ ìŒì‹:                   â”‚
â”‚     â€¢ í˜„ë¯¸, ì¡ê³¡ë°¥                  â”‚
â”‚     â€¢ ì±„ì†Œ, í•´ì¡°ë¥˜                  â”‚
â”‚     â€¢ ë‹¨ë°±ì§ˆ (ìƒì„ , ë‘ë¶€)           â”‚
â”‚                                      â”‚
â”‚  ğŸ‘¤ í˜ˆë‹¹ì´ ë†’ìœ¼ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?â”‚
â”‚                                      â”‚
â”‚  ğŸ¤– í˜ˆë‹¹ì´ ë†’ì„ ë•ŒëŠ”...             â”‚
â”‚                                      â”‚
â”‚  [ì…ë ¥ì¹¸]                           â”‚
â”‚  [ì „ì†¡]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬

```typescript
interface ChatMessage {
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}

const chatWithAI = async (
  userMessage: string,
  chatHistory: ChatMessage[]
) => {
  const systemPrompt = `
ë‹¹ì‹ ì€ ì‹œë‹ˆì–´ ì „ë¬¸ ê±´ê°• ìƒë‹´ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

ì—­í• :
- ê±´ê°•, ë³µì•½, ì‹ë‹¨, ìš´ë™ ë“±ì— ëŒ€í•´ ìƒë‹´
- ì‰½ê³  ì¹œì ˆí•˜ê²Œ ì„¤ëª…
- ë³µì¡í•œ ì˜í•™ ìš©ì–´ ì‚¬ìš© ìì œ

ì£¼ì˜ì‚¬í•­:
- ì˜í•™ì  ì§„ë‹¨ì´ë‚˜ ì²˜ë°©ì€ í•˜ì§€ ì•ŠìŒ
- í•­ìƒ "ì˜ì‚¬ì™€ ìƒë‹´í•˜ì„¸ìš”" ê¶Œê³ 
`;

  const messages = [
    { role: 'system', content: systemPrompt },
    ...chatHistory.map(msg => ({
      role: msg.role,
      content: msg.content
    })),
    { role: 'user', content: userMessage }
  ];

  const response = await openai.chat.completions.create({
    model: 'gpt-4',
    messages,
    temperature: 0.8,
    max_tokens: 300
  });

  return response.choices[0].message.content;
};
```

---

## ì£¼ê°„ ê±´ê°• ë¦¬í¬íŠ¸

### ìë™ ìƒì„± (ë§¤ì£¼ ì¼ìš”ì¼ ì˜¤í›„ 8ì‹œ)

```typescript
const generateWeeklyReport = async (userId: string) => {
  // 1. ì§€ë‚œ ì£¼ ë°ì´í„° ìˆ˜ì§‘
  const weekData = await collectWeekData(userId);

  // 2. GPTë¡œ ë¦¬í¬íŠ¸ ìƒì„±
  const systemPrompt = `
ë‹¹ì‹ ì€ ê±´ê°• ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ì£¼ê°„ ê±´ê°• ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì‰¬ìš´ ë§ë¡œ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

ë¦¬í¬íŠ¸ êµ¬ì„±:
1. ì¢…í•© í‰ê°€ (í•œ ì¤„ ìš”ì•½)
2. ì£¼ìš” ì„±ê³¼ (ì˜í•œ ì )
3. ê°œì„  í•„ìš” ì‚¬í•­
4. ë‹¤ìŒ ì£¼ ê¶Œì¥ì‚¬í•­
`;

  const userPrompt = `
í™ê¸¸ìˆœë‹˜ (75ì„¸)ì˜ ì§€ë‚œ ì£¼ ê±´ê°• ë°ì´í„°:

â”â”â” ë³µì•½ â”â”â”
- ë³µì•½ ì¤€ìˆ˜ìœ¨: ${weekData.medicationAdherence}%
- ì´ ë³µìš©: ${weekData.medicationTaken}íšŒ / ${weekData.medicationTotal}íšŒ

â”â”â” ê±´ê°• ì¸¡ì • â”â”â”
- í˜ˆì••: ${weekData.bloodPressure.avg} (í‰ê· )
- ìµœê³ : ${weekData.bloodPressure.max}
- ìµœì €: ${weekData.bloodPressure.min}

- í˜ˆë‹¹: ${weekData.bloodSugar.avg} (í‰ê· )

- ì²´ì¤‘: ${weekData.weight.current}kg (ë³€í™”: ${weekData.weight.change}kg)

â”â”â” ì‹ì‚¬ â”â”â”
- ì‹ì‚¬ ê¸°ë¡ë¥ : ${weekData.mealRecordRate}%
- í‰ê·  ì¹¼ë¡œë¦¬: ${weekData.calories}kcal
- ë‚˜íŠ¸ë¥¨: ${weekData.sodium}mg (í‰ê· )

â”â”â” í™œë™ â”â”â”
- í‰ê·  ê±¸ìŒ ìˆ˜: ${weekData.steps}ë³´

ìœ„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì‹œë‹ˆì–´ê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ì£¼ê°„ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.
ê¸ì •ì ì´ê³  ê²©ë ¤í•˜ëŠ” í†¤ìœ¼ë¡œ ì‘ì„±í•˜ë˜, ê°œì„ ì ë„ ëª…í™•íˆ ì•Œë ¤ì£¼ì„¸ìš”.
`;

  const report = await askGPT(userPrompt, systemPrompt);

  // 3. DB ì €ì¥
  await supabase
    .from('weekly_reports')
    .insert({
      user_id: userId,
      week_start: weekData.startDate,
      week_end: weekData.endDate,
      content: report,
      data: weekData
    });

  // 4. ì•Œë¦¼ ë°œì†¡
  await sendNotification({
    userId,
    title: 'ğŸ“Š ì´ë²ˆ ì£¼ ê±´ê°• ë¦¬í¬íŠ¸ê°€ ë„ì°©í–ˆì–´ìš”',
    body: 'ì§€ë‚œ ì£¼ ê±´ê°• ê´€ë¦¬ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”',
    data: { type: 'weekly_report' }
  });

  return report;
};
```

### ë¦¬í¬íŠ¸ í™”ë©´

```typescript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ì´ë²ˆ ì£¼ ê±´ê°• ë¦¬í¬íŠ¸              â”‚
â”‚  2025ë…„ 2ì›” 10ì¼ ~ 2ì›” 16ì¼         â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì¢…í•© í‰ê°€ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  ğŸ‰ ì´ë²ˆ ì£¼ ì •ë§ ì˜í•˜ì…¨ì–´ìš”!        â”‚
â”‚  ë³µì•½ë„ ì˜ ì§€í‚¤ì‹œê³ , í˜ˆì••ë„         â”‚
â”‚  ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ê³  ìˆìŠµë‹ˆë‹¤.      â”‚
â”‚                                      â”‚
â”‚  â”â”â” ì£¼ìš” ì„±ê³¼ â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  âœ… ë³µì•½ ì¤€ìˆ˜ìœ¨ 100% (7ì¼ ì—°ì†!)    â”‚
â”‚  âœ… í˜ˆì•• í‰ê·  122/80 (ì •ìƒ ë²”ìœ„)    â”‚
â”‚  âœ… ê¾¸ì¤€í•œ ê±´ê°• ì¸¡ì • (ì£¼ 5íšŒ)       â”‚
â”‚                                      â”‚
â”‚  â”â”â” ê°œì„  í•„ìš” â”â”â”                 â”‚
â”‚                                      â”‚
â”‚  âš ï¸ ë‚˜íŠ¸ë¥¨ ì„­ì·¨ê°€ ì•½ê°„ ë†’ìŠµë‹ˆë‹¤     â”‚
â”‚     (í‰ê·  2,300mg, ê¶Œì¥ 2,000mg)   â”‚
â”‚                                      â”‚
â”‚  ğŸ’¡ ì €ì—¼ ì‹ë‹¨ì„ ì¶”ì²œí•©ë‹ˆë‹¤:         â”‚
â”‚  - êµ­ë¬¼ ì ê²Œ ë¨¹ê¸°                   â”‚
â”‚  - ê¹€ì¹˜ëŠ” ì¡°ê¸ˆë§Œ                    â”‚
â”‚  - ê°€ê³µì‹í’ˆ í”¼í•˜ê¸°                  â”‚
â”‚                                      â”‚
â”‚  â”â”â” ë‹¤ìŒ ì£¼ ëª©í‘œ â”â”â”              â”‚
â”‚                                      â”‚
â”‚  1. ë³µì•½ 100% ìœ ì§€í•˜ê¸°              â”‚
â”‚  2. ë‚˜íŠ¸ë¥¨ í•˜ë£¨ 2,000mg ì´í•˜        â”‚
â”‚  3. ë§¤ì¼ 30ë¶„ ì‚°ì±…í•˜ê¸°              â”‚
â”‚                                      â”‚
â”‚  [ìì„¸íˆ ë³´ê¸°] [ê°€ì¡±ê³¼ ê³µìœ ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì˜ˆì¸¡ ì¼€ì–´

### íŒ¨í„´ ë¶„ì„ & ì˜ˆì¸¡

```typescript
const predictHealthRisk = async (userId: string) => {
  // 1. ìµœê·¼ 30ì¼ ë°ì´í„° ìˆ˜ì§‘
  const monthData = await collectMonthData(userId);

  // 2. GPTë¡œ íŒ¨í„´ ë¶„ì„
  const systemPrompt = `
ë‹¹ì‹ ì€ ê±´ê°• ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ìœ„í—˜ì„ ì˜ˆì¸¡í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤.

ë¶„ì„ ë°©ë²•:
1. ì¶”ì„¸ ë¶„ì„ (ìƒìŠ¹/í•˜ë½/ìœ ì§€)
2. ì´ìƒ íŒ¨í„´ ê°ì§€
3. ìœ„í—˜ ìš”ì¸ íŒŒì•…
4. ì˜ˆë°© ì¡°ì¹˜ ê¶Œì¥

ì‘ë‹µ í˜•ì‹ (JSON):
{
  "riskLevel": "low" | "medium" | "high",
  "predictions": [
    {
      "type": "í˜ˆì•• ìƒìŠ¹",
      "probability": "ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ",
      "reason": "ìµœê·¼ 3ì¼ê°„ í˜ˆì•• ìƒìŠ¹ ì¶”ì„¸",
      "timeline": "7ì¼ ë‚´"
    }
  ],
  "recommendations": ["ê¶Œì¥ì‚¬í•­1", "ê¶Œì¥ì‚¬í•­2"]
}
`;

  const userPrompt = `
ìµœê·¼ 30ì¼ ê±´ê°• ë°ì´í„°:

í˜ˆì•• ì¶”ì´:
${monthData.bloodPressure.map((bp, i) =>
  `${i+1}ì¼ ì „: ${bp.systolic}/${bp.diastolic}`
).join('\n')}

ë³µì•½ ì¤€ìˆ˜ìœ¨:
${monthData.medicationAdherence.map((rate, i) =>
  `${i+1}ì¼ ì „: ${rate}%`
).join('\n')}

ë‚˜íŠ¸ë¥¨ ì„­ì·¨:
${monthData.sodium.map((amount, i) =>
  `${i+1}ì¼ ì „: ${amount}mg`
).join('\n')}

ìœ„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ê±´ê°• ìœ„í—˜ì„ ì˜ˆì¸¡í•˜ê³  ì˜ˆë°© ì¡°ì¹˜ë¥¼ ê¶Œì¥í•´ì£¼ì„¸ìš”.
`;

  const response = await askGPT(userPrompt, systemPrompt);
  const prediction = JSON.parse(response);

  // 3. ìœ„í—˜ë„ê°€ ë†’ìœ¼ë©´ ì•Œë¦¼
  if (prediction.riskLevel === 'high') {
    await sendNotification({
      userId,
      title: 'âš ï¸ ê±´ê°• ì£¼ì˜ í•„ìš”',
      body: prediction.predictions[0].reason,
      priority: 'high'
    });

    // ê°€ì¡±ì—ê²Œë„ ì•Œë¦¼
    await notifyFamily({
      userId,
      type: 'health_risk_prediction',
      message: `ì–´ë¨¸ë‹ˆì˜ ${prediction.predictions[0].type} ìœ„í—˜ì´ ì˜ˆì¸¡ë©ë‹ˆë‹¤`,
      priority: 'high'
    });
  }

  return prediction;
};
```

---

## UI/UX

### ìŒì„± ì…ë ¥ (STT)

```typescript
// Web Speech API ì‚¬ìš©
const startVoiceInput = () => {
  const recognition = new webkitSpeechRecognition();
  recognition.lang = 'ko-KR';
  recognition.continuous = false;
  recognition.interimResults = false;

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    setSymptom(transcript);
  };

  recognition.onerror = (event) => {
    console.error('ìŒì„± ì¸ì‹ ì˜¤ë¥˜:', event.error);
    alert('ìŒì„± ì¸ì‹ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
  };

  recognition.start();
};
```

### ìŒì„± ì¶œë ¥ (TTS)

```typescript
// Web Speech API ì‚¬ìš©
const speakText = (text: string) => {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'ko-KR';
  utterance.rate = 0.9; // ì¡°ê¸ˆ ëŠë¦¬ê²Œ
  utterance.pitch = 1.0;

  window.speechSynthesis.speak(utterance);
};

// AI ì‘ë‹µì„ ì½ì–´ì£¼ê¸°
const handleAIResponse = (response: string) => {
  setAIResponse(response);

  // ì‹œë‹ˆì–´ ì„¤ì •ì—ì„œ "ìŒì„± ì•ˆë‚´" ì¼œì ¸ ìˆìœ¼ë©´
  if (userSettings.enableTTS) {
    speakText(response);
  }
};
```

---

## API ì„¤ê³„

### REST API Endpoints

```typescript
// â”â”â” ì¦ìƒ ë¶„ì„ â”â”â”

POST /api/health/ai/analyze-symptom
Body: {
  symptom: string;
  userContext?: {
    age?: number;
    conditions?: string[];
    medications?: string[];
  }
}
Response: {
  possibleCauses: string[];
  departments: Department[];
  immediateActions: string[];
  urgency: 'emergency' | 'normal' | 'optional';
  explanation: string;
}

// â”â”â” ê±´ê°• ìƒë‹´ ì±—ë´‡ â”â”â”

POST /api/health/ai/chat
Body: {
  message: string;
  chatHistory: ChatMessage[];
}
Response: {
  reply: string;
  timestamp: Date;
}

// â”â”â” ì£¼ê°„ ë¦¬í¬íŠ¸ â”â”â”

GET /api/health/ai/weekly-report?week=2025-02-10
Response: {
  report: {
    weekStart: Date;
    weekEnd: Date;
    content: string;
    data: WeekData;
  }
}

// â”â”â” ì˜ˆì¸¡ ì¼€ì–´ â”â”â”

GET /api/health/ai/predict-risk
Response: {
  riskLevel: string;
  predictions: Prediction[];
  recommendations: string[];
}
```

---

## ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Week 1: AI ì–´ì‹œìŠ¤í„´íŠ¸
- [ ] Day 1-2
  - [ ] OpenAI API ì„¤ì •
  - [ ] ì¦ìƒ ë¶„ì„ í”„ë¡¬í”„íŠ¸ ì„¤ê³„
  - [ ] ê¸´ê¸‰ ìƒí™© ê°ì§€ ë¡œì§
- [ ] Day 3-4
  - [ ] ê±´ê°• ìƒë‹´ ì±—ë´‡ êµ¬í˜„
  - [ ] ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬
  - [ ] UI ê°œë°œ (ì…ë ¥/ì¶œë ¥)
- [ ] Day 5
  - [ ] ì£¼ê°„ ë¦¬í¬íŠ¸ ìë™ ìƒì„±
  - [ ] ì˜ˆì¸¡ ì¼€ì–´ ë¡œì§
  - [ ] ìŒì„± ì…ë ¥/ì¶œë ¥ (STT/TTS)
  - [ ] í…ŒìŠ¤íŠ¸

---

## ë¹„ìš© ì˜ˆìƒ

### OpenAI API ìš”ê¸ˆ

```
GPT-4:
- ì…ë ¥: $0.03 / 1K tokens
- ì¶œë ¥: $0.06 / 1K tokens

ì˜ˆìƒ ì‚¬ìš©ëŸ‰ (500ëª… ê¸°ì¤€):
- ì¦ìƒ ë¶„ì„: 200ê±´/ì¼ Ã— í‰ê·  800 tokens = 160,000 tokens
- ê±´ê°• ìƒë‹´: 100ê±´/ì¼ Ã— í‰ê·  600 tokens = 60,000 tokens
- ì£¼ê°„ ë¦¬í¬íŠ¸: 500ê±´/ì£¼ Ã— 1,000 tokens = 500,000 tokens/ì£¼ (ì•½ 70,000/ì¼)

ì´ 290,000 tokens/ì¼

ì›” ë¹„ìš©:
290,000 tokens Ã— 30ì¼ = 8,700,000 tokens
ì…ë ¥: 4,350,000 Ã— $0.03 / 1,000 = $130
ì¶œë ¥: 4,350,000 Ã— $0.06 / 1,000 = $261
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´: ì•½ $391/ì›” (ì•½ 52ë§Œì›)
```

---

**ì‘ì„±ì¼**: 2025-01-24
**ë²„ì „**: 1.0
**ë‹¤ìŒ ë¬¸ì„œ**: 03-ë³‘ì›-ì°¾ê¸°-ë°-ì˜ˆì•½.md
